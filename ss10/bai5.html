<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        const teamHistory = [
            {
                name: "Messi",
                position: "Forward",
                nationality: "Argentina",
                seasons: {
                    "2022-2023": { matches: 34, goals: 21, assists: 14, yellowCards: 3 },
                    "2023-2024": { matches: 32, goals: 25, assists: 15, yellowCards: 2 },
                    "2024-2025": { matches: 28, goals: 18, assists: 12, yellowCards: 1 }
                }
            },
            {
                name: "Ronaldo",
                position: "Forward",
                nationality: "Portugal",
                seasons: {
                    "2022-2023": { matches: 38, goals: 28, assists: 8, yellowCards: 5 },
                    "2023-2024": { matches: 35, goals: 30, assists: 10, yellowCards: 4 },
                    "2024-2025": { matches: 30, goals: 22, assists: 9, yellowCards: 3 }
                }
            }
        ];
        function generatePlayerSeasonReport(playerName, teamHistory) {
            const player = teamHistory.find(p => p.name === playerName);
            if (!player) {
                return `Không tìm thấy cầu thủ ${playerName}`;
            }
            const seasonsArray = Object.entries(player.seasons);
            const careerStats = seasonsArray.reduce((acc, [seasonName, stats]) => {
                acc.totalMatches += stats.matches;
                acc.totalGoals += stats.goals;
                acc.totalAssists += stats.assists;
                acc.totalYellowCards += stats.yellowCards;
                if (
                    !acc.bestSeason ||
                    stats.goals > acc.bestSeason.goals ||
                    (
                        stats.goals === acc.bestSeason.goals &&
                        stats.assists > acc.bestSeason.assists
                    )
                ) {
                    acc.bestSeason = {
                        season: seasonName,
                        goals: stats.goals,
                        assists: stats.assists
                    };
                }
                return acc;
            }, {
                totalMatches: 0,
                totalGoals: 0,
                totalAssists: 0,
                totalYellowCards: 0,
                bestSeason: null
            });
            careerStats.averageGoalsPerMatch =
                Number((careerStats.totalGoals / careerStats.totalMatches).toFixed(2));
            careerStats.averageAssistsPerMatch =
                Number((careerStats.totalAssists / careerStats.totalMatches).toFixed(2));
            return {
                name: player.name,
                position: player.position,
                nationality: player.nationality,
                careerStats
            };
        }
    </script>
</body>

</html>