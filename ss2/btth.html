<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>He thong muon sach</title>
</head>
<body>
<script>
  let userName = prompt("Nhập tên người dùng:");
  let role = prompt("Nhập vai trò (admin/student/guest):");
  let balance = +prompt("Nhập số dư tài khoản:");
  let cardStatus = prompt("Trạng thái thẻ (true nếu hoạt động):");
  let overdueDays = +prompt("Nhập số ngày quá hạn:");
  role = role ? role.toLowerCase() : "";
  let isActiveCard = (cardStatus === "true");
  let roleMessage = "";
  switch (role) {
    case "admin":
      roleMessage = "Chào Admin, bạn có toàn quyền hệ thống";
      break;
    case "student":
      roleMessage = "Chào sinh viên, bạn có thể mượn sách";
      break;
    case "guest":
      roleMessage = "Chào khách, bạn chỉ có thể đọc tại chỗ";
      break;
    default:
      roleMessage = "Lỗi: Vai trò không hợp lệ!";
  }
  let borrowResult = "";
  let reason = "";
  if (!userName) {
    borrowResult = "YÊU CẦU BỊ TỪ CHỐI";
    reason = "Tên người dùng bị trống";
  } 
  else if (!(role === "admin" || role === "student")) {
    borrowResult = "YÊU CẦU BỊ TỪ CHỐI";
    reason = "Vai trò không được phép mượn";
  }
  else if (!(balance > 0 && isActiveCard)) {
    borrowResult = "YÊU CẦU BỊ TỪ CHỐI";
    reason = "Số dư hoặc thẻ không hợp lệ";
  }
  else {
    borrowResult = "ĐƯỢC PHÉP MƯỢN SÁCH";
  }
  let fine = 0;
  let statusReturn = "";

  if (overdueDays <= 0) {
    statusReturn = "Cảm ơn bạn đã trả đúng hạn";
  }
  else if (overdueDays <= 5) {
    fine = overdueDays * 5000;
    statusReturn = `Quá hạn ${overdueDays} ngày`;
  }
  else if (overdueDays <= 10) {
    fine = overdueDays * 10000;
    statusReturn = `Quá hạn ${overdueDays} ngày`;
  }
  else {
    fine = 200000;
    statusReturn = `Quá hạn ${overdueDays} ngày - TÀI KHOẢN BỊ KHÓA`;
  }

  
  console.log(`
--- HỆ THỐNG MƯỢN TRẢ ---
Người dùng: ${userName ? userName.toUpperCase() : "KHÔNG XÁC ĐỊNH"}

Quyền hạn: ${roleMessage}

Kết quả mượn: ${borrowResult}
${reason ? "Lý do: " + reason : ""}

Tình trạng trả sách: ${statusReturn}

Tiền phạt: ${fine} VNĐ
`);
</script>
</body>
</html>